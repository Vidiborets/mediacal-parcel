{"id":"Focm","dependencies":[{"name":"/Users/andrew/Documents/GitHub/mediacal-parcel/package.json","includedInParent":true,"mtime":1643993699174},{"name":"/Users/andrew/Documents/GitHub/mediacal-parcel/.browserslistrc","includedInParent":true,"mtime":1643985300327}],"generated":{"js":"\"use strict\";document.addEventListener(\"DOMContentLoaded\",function(){const e=document.getElementById(\"form\");function t(e){e.parentElement.classList.add(\"_error\"),e.classList.add(\"_error\")}function n(e){e.parentElement.classList.remove(\"_error\"),e.classList.remove(\"_error\")}function r(e){return!/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(e.value)}e.addEventListener(\"submit\",async function(i){i.preventDefault();let o=function(e){let a=0,s=document.querySelectorAll(\"._req\");for(let i=0;i<s.length;i++){const e=s[i];n(e),e.classList.contains(\"_email\")?r(e)&&(t(e),a++):\"checkbox\"===e.getAttribute(\"type\")&&!1===e.checked?(t(e),a++):\"\"===e.value&&(t(e),a++)}return a}(),l=new FormData(e);if(l.append(\"image\",a.files[0]),0===o){e.classList.add(\"_sending\");let t=await fetch(\"sendmail.php\",{method:\"POST\",body:l});if(t.ok){let n=await t.json();alert(n.message),s.innerHTML=\"\",e.reset(),e.classList.remove(\"_sending\")}else alert(\"Ошибка\"),e.classList.remove(\"_sending\")}else alert(\"Заполните обязательные поля\")});const a=document.getElementById(\"formImage\"),s=document.getElementById(\"formPreview\");a.addEventListener(\"change\",()=>{!function(e){if(![\"image/jpeg\",\"image/png\",\"image/gif\"].includes(e.type))return alert(\"Разрешены только изображения\"),void(a.value=\"\");if(e.size>2097152)return void alert(\"Файл должен быть меньше 2 мб\");var t=new FileReader;t.onload=function(e){s.innerHTML=`<img src=\"${e.target.result}\" alt=\"Foto\">`},t.onerror=function(e){alert(\"Ошибка\")},t.readAsDataURL(e)}(a.files[0])})});"},"sourceMaps":{"js":{"mappings":[{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"index.js","name":"document","original":{"line":3,"column":0},"generated":{"line":1,"column":13}},{"source":"index.js","name":"addEventListener","original":{"line":3,"column":9},"generated":{"line":1,"column":22}},{"source":"index.js","original":{"line":3,"column":26},"generated":{"line":1,"column":39}},{"source":"index.js","original":{"line":3,"column":45},"generated":{"line":1,"column":58}},{"source":"index.js","name":"form","original":{"line":4,"column":10},"generated":{"line":1,"column":69}},{"source":"index.js","name":"form","original":{"line":4,"column":10},"generated":{"line":1,"column":75}},{"source":"index.js","name":"document","original":{"line":4,"column":17},"generated":{"line":1,"column":77}},{"source":"index.js","name":"getElementById","original":{"line":4,"column":26},"generated":{"line":1,"column":86}},{"source":"index.js","original":{"line":4,"column":41},"generated":{"line":1,"column":101}},{"source":"index.js","name":"formAddError","original":{"line":62,"column":13},"generated":{"line":1,"column":109}},{"source":"index.js","name":"formAddError","original":{"line":62,"column":13},"generated":{"line":1,"column":118}},{"source":"index.js","name":"input","original":{"line":62,"column":26},"generated":{"line":1,"column":120}},{"source":"index.js","name":"input","original":{"line":63,"column":8},"generated":{"line":1,"column":123}},{"source":"index.js","name":"parentElement","original":{"line":63,"column":14},"generated":{"line":1,"column":125}},{"source":"index.js","name":"classList","original":{"line":63,"column":28},"generated":{"line":1,"column":139}},{"source":"index.js","name":"add","original":{"line":63,"column":38},"generated":{"line":1,"column":149}},{"source":"index.js","original":{"line":63,"column":42},"generated":{"line":1,"column":153}},{"source":"index.js","name":"input","original":{"line":64,"column":8},"generated":{"line":1,"column":163}},{"source":"index.js","name":"classList","original":{"line":64,"column":14},"generated":{"line":1,"column":165}},{"source":"index.js","name":"add","original":{"line":64,"column":24},"generated":{"line":1,"column":175}},{"source":"index.js","original":{"line":64,"column":28},"generated":{"line":1,"column":179}},{"source":"index.js","name":"formRemoveError","original":{"line":67,"column":13},"generated":{"line":1,"column":189}},{"source":"index.js","name":"formRemoveError","original":{"line":67,"column":13},"generated":{"line":1,"column":198}},{"source":"index.js","name":"input","original":{"line":67,"column":29},"generated":{"line":1,"column":200}},{"source":"index.js","name":"input","original":{"line":68,"column":8},"generated":{"line":1,"column":203}},{"source":"index.js","name":"parentElement","original":{"line":68,"column":14},"generated":{"line":1,"column":205}},{"source":"index.js","name":"classList","original":{"line":68,"column":28},"generated":{"line":1,"column":219}},{"source":"index.js","name":"remove","original":{"line":68,"column":38},"generated":{"line":1,"column":229}},{"source":"index.js","original":{"line":68,"column":45},"generated":{"line":1,"column":236}},{"source":"index.js","name":"input","original":{"line":69,"column":8},"generated":{"line":1,"column":246}},{"source":"index.js","name":"classList","original":{"line":69,"column":14},"generated":{"line":1,"column":248}},{"source":"index.js","name":"remove","original":{"line":69,"column":24},"generated":{"line":1,"column":258}},{"source":"index.js","original":{"line":69,"column":31},"generated":{"line":1,"column":265}},{"source":"index.js","name":"emailTest","original":{"line":72,"column":13},"generated":{"line":1,"column":275}},{"source":"index.js","name":"emailTest","original":{"line":72,"column":13},"generated":{"line":1,"column":284}},{"source":"index.js","name":"input","original":{"line":72,"column":23},"generated":{"line":1,"column":286}},{"source":"index.js","original":{"line":73,"column":15},"generated":{"line":1,"column":289}},{"source":"index.js","original":{"line":73,"column":16},"generated":{"line":1,"column":296}},{"source":"index.js","name":"test","original":{"line":73,"column":64},"generated":{"line":1,"column":344}},{"source":"index.js","name":"input","original":{"line":73,"column":69},"generated":{"line":1,"column":349}},{"source":"index.js","name":"value","original":{"line":73,"column":75},"generated":{"line":1,"column":351}},{"source":"index.js","name":"form","original":{"line":5,"column":4},"generated":{"line":1,"column":358}},{"source":"index.js","name":"addEventListener","original":{"line":5,"column":9},"generated":{"line":1,"column":360}},{"source":"index.js","original":{"line":5,"column":26},"generated":{"line":1,"column":377}},{"source":"index.js","name":"formsend","original":{"line":7,"column":19},"generated":{"line":1,"column":386}},{"source":"index.js","name":"e","original":{"line":7,"column":28},"generated":{"line":1,"column":401}},{"source":"index.js","name":"e","original":{"line":8,"column":8},"generated":{"line":1,"column":404}},{"source":"index.js","name":"preventDefault","original":{"line":8,"column":10},"generated":{"line":1,"column":406}},{"source":"index.js","name":"error","original":{"line":10,"column":12},"generated":{"line":1,"column":423}},{"source":"index.js","name":"error","original":{"line":10,"column":12},"generated":{"line":1,"column":427}},{"source":"index.js","name":"formValidate","original":{"line":36,"column":13},"generated":{"line":1,"column":429}},{"source":"index.js","name":"form","original":{"line":36,"column":26},"generated":{"line":1,"column":438}},{"source":"index.js","name":"error","original":{"line":37,"column":12},"generated":{"line":1,"column":441}},{"source":"index.js","name":"error","original":{"line":37,"column":12},"generated":{"line":1,"column":445}},{"source":"index.js","original":{"line":37,"column":20},"generated":{"line":1,"column":447}},{"source":"index.js","name":"formReq","original":{"line":38,"column":12},"generated":{"line":1,"column":449}},{"source":"index.js","name":"document","original":{"line":38,"column":22},"generated":{"line":1,"column":451}},{"source":"index.js","name":"querySelectorAll","original":{"line":38,"column":31},"generated":{"line":1,"column":460}},{"source":"index.js","original":{"line":38,"column":48},"generated":{"line":1,"column":477}},{"source":"index.js","original":{"line":40,"column":13},"generated":{"line":1,"column":486}},{"source":"index.js","original":{"line":40,"column":13},"generated":{"line":1,"column":490}},{"source":"index.js","name":"index","original":{"line":40,"column":17},"generated":{"line":1,"column":494}},{"source":"index.js","original":{"line":40,"column":24},"generated":{"line":1,"column":496}},{"source":"index.js","name":"index","original":{"line":40,"column":27},"generated":{"line":1,"column":498}},{"source":"index.js","name":"formReq","original":{"line":40,"column":35},"generated":{"line":1,"column":500}},{"source":"index.js","name":"length","original":{"line":40,"column":43},"generated":{"line":1,"column":502}},{"source":"index.js","name":"index","original":{"line":40,"column":51},"generated":{"line":1,"column":509}},{"source":"index.js","original":{"line":40,"column":60},"generated":{"line":1,"column":513}},{"source":"index.js","name":"input","original":{"line":41,"column":18},"generated":{"line":1,"column":514}},{"source":"index.js","name":"input","original":{"line":41,"column":18},"generated":{"line":1,"column":520}},{"source":"index.js","name":"formReq","original":{"line":41,"column":26},"generated":{"line":1,"column":522}},{"source":"index.js","name":"index","original":{"line":41,"column":34},"generated":{"line":1,"column":524}},{"source":"index.js","name":"formRemoveError","original":{"line":42,"column":12},"generated":{"line":1,"column":527}},{"source":"index.js","name":"input","original":{"line":42,"column":28},"generated":{"line":1,"column":529}},{"source":"index.js","name":"input","original":{"line":44,"column":15},"generated":{"line":1,"column":532}},{"source":"index.js","name":"classList","original":{"line":44,"column":21},"generated":{"line":1,"column":534}},{"source":"index.js","name":"contains","original":{"line":44,"column":31},"generated":{"line":1,"column":544}},{"source":"index.js","original":{"line":44,"column":40},"generated":{"line":1,"column":553}},{"source":"index.js","name":"emailTest","original":{"line":45,"column":19},"generated":{"line":1,"column":563}},{"source":"index.js","name":"input","original":{"line":45,"column":29},"generated":{"line":1,"column":565}},{"source":"index.js","name":"formAddError","original":{"line":46,"column":20},"generated":{"line":1,"column":570}},{"source":"index.js","name":"input","original":{"line":46,"column":33},"generated":{"line":1,"column":572}},{"source":"index.js","name":"error","original":{"line":47,"column":20},"generated":{"line":1,"column":575}},{"source":"index.js","original":{"line":49,"column":51},"generated":{"line":1,"column":580}},{"source":"index.js","name":"input","original":{"line":49,"column":21},"generated":{"line":1,"column":593}},{"source":"index.js","name":"getAttribute","original":{"line":49,"column":27},"generated":{"line":1,"column":595}},{"source":"index.js","original":{"line":49,"column":40},"generated":{"line":1,"column":608}},{"source":"index.js","original":{"line":49,"column":83},"generated":{"line":1,"column":618}},{"source":"index.js","name":"input","original":{"line":49,"column":65},"generated":{"line":1,"column":622}},{"source":"index.js","name":"checked","original":{"line":49,"column":71},"generated":{"line":1,"column":624}},{"source":"index.js","name":"formAddError","original":{"line":50,"column":16},"generated":{"line":1,"column":633}},{"source":"index.js","name":"input","original":{"line":50,"column":29},"generated":{"line":1,"column":635}},{"source":"index.js","name":"error","original":{"line":51,"column":16},"generated":{"line":1,"column":638}},{"source":"index.js","original":{"line":53,"column":36},"generated":{"line":1,"column":643}},{"source":"index.js","name":"input","original":{"line":53,"column":20},"generated":{"line":1,"column":648}},{"source":"index.js","name":"value","original":{"line":53,"column":26},"generated":{"line":1,"column":650}},{"source":"index.js","name":"formAddError","original":{"line":54,"column":20},"generated":{"line":1,"column":658}},{"source":"index.js","name":"input","original":{"line":54,"column":33},"generated":{"line":1,"column":660}},{"source":"index.js","name":"error","original":{"line":55,"column":20},"generated":{"line":1,"column":663}},{"source":"index.js","name":"error","original":{"line":59,"column":15},"generated":{"line":1,"column":668}},{"source":"index.js","name":"error","original":{"line":59,"column":15},"generated":{"line":1,"column":675}},{"source":"index.js","name":"formValidate","original":{"line":10,"column":20},"generated":{"line":1,"column":677}},{"source":"index.js","name":"formData","original":{"line":12,"column":12},"generated":{"line":1,"column":680}},{"source":"index.js","original":{"line":12,"column":23},"generated":{"line":1,"column":682}},{"source":"index.js","name":"FormData","original":{"line":12,"column":27},"generated":{"line":1,"column":686}},{"source":"index.js","name":"form","original":{"line":12,"column":36},"generated":{"line":1,"column":695}},{"source":"index.js","name":"error","original":{"line":15,"column":11},"generated":{"line":1,"column":698}},{"source":"index.js","name":"formData","original":{"line":13,"column":8},"generated":{"line":1,"column":701}},{"source":"index.js","name":"append","original":{"line":13,"column":17},"generated":{"line":1,"column":703}},{"source":"index.js","original":{"line":13,"column":24},"generated":{"line":1,"column":710}},{"source":"index.js","name":"formImage","original":{"line":13,"column":33},"generated":{"line":1,"column":718}},{"source":"index.js","name":"files","original":{"line":13,"column":43},"generated":{"line":1,"column":720}},{"source":"index.js","original":{"line":13,"column":49},"generated":{"line":1,"column":726}},{"source":"index.js","original":{"line":15,"column":21},"generated":{"line":1,"column":730}},{"source":"index.js","name":"error","original":{"line":15,"column":11},"generated":{"line":1,"column":734}},{"source":"index.js","original":{"line":15,"column":23},"generated":{"line":1,"column":736}},{"source":"index.js","name":"form","original":{"line":16,"column":12},"generated":{"line":1,"column":737}},{"source":"index.js","name":"classList","original":{"line":16,"column":17},"generated":{"line":1,"column":739}},{"source":"index.js","name":"add","original":{"line":16,"column":27},"generated":{"line":1,"column":749}},{"source":"index.js","original":{"line":16,"column":31},"generated":{"line":1,"column":753}},{"source":"index.js","name":"response","original":{"line":17,"column":16},"generated":{"line":1,"column":765}},{"source":"index.js","name":"response","original":{"line":17,"column":16},"generated":{"line":1,"column":769}},{"source":"index.js","name":"fetch","original":{"line":17,"column":33},"generated":{"line":1,"column":777}},{"source":"index.js","original":{"line":17,"column":39},"generated":{"line":1,"column":783}},{"source":"index.js","original":{"line":17,"column":54},"generated":{"line":1,"column":798}},{"source":"index.js","name":"method","original":{"line":18,"column":16},"generated":{"line":1,"column":799}},{"source":"index.js","original":{"line":18,"column":23},"generated":{"line":1,"column":806}},{"source":"index.js","name":"body","original":{"line":19,"column":16},"generated":{"line":1,"column":813}},{"source":"index.js","name":"formData","original":{"line":19,"column":21},"generated":{"line":1,"column":818}},{"source":"index.js","name":"response","original":{"line":21,"column":15},"generated":{"line":1,"column":822}},{"source":"index.js","name":"response","original":{"line":21,"column":15},"generated":{"line":1,"column":825}},{"source":"index.js","name":"ok","original":{"line":21,"column":24},"generated":{"line":1,"column":827}},{"source":"index.js","original":{"line":21,"column":27},"generated":{"line":1,"column":830}},{"source":"index.js","name":"result","original":{"line":22,"column":20},"generated":{"line":1,"column":831}},{"source":"index.js","name":"result","original":{"line":22,"column":20},"generated":{"line":1,"column":835}},{"source":"index.js","name":"response","original":{"line":22,"column":35},"generated":{"line":1,"column":843}},{"source":"index.js","name":"json","original":{"line":22,"column":44},"generated":{"line":1,"column":845}},{"source":"index.js","name":"alert","original":{"line":23,"column":16},"generated":{"line":1,"column":852}},{"source":"index.js","name":"result","original":{"line":23,"column":22},"generated":{"line":1,"column":858}},{"source":"index.js","name":"message","original":{"line":23,"column":29},"generated":{"line":1,"column":860}},{"source":"index.js","name":"formPreview","original":{"line":24,"column":16},"generated":{"line":1,"column":869}},{"source":"index.js","name":"innerHTML","original":{"line":24,"column":28},"generated":{"line":1,"column":871}},{"source":"index.js","original":{"line":24,"column":40},"generated":{"line":1,"column":881}},{"source":"index.js","name":"form","original":{"line":25,"column":16},"generated":{"line":1,"column":884}},{"source":"index.js","name":"reset","original":{"line":25,"column":21},"generated":{"line":1,"column":886}},{"source":"index.js","name":"form","original":{"line":26,"column":16},"generated":{"line":1,"column":894}},{"source":"index.js","name":"classList","original":{"line":26,"column":21},"generated":{"line":1,"column":896}},{"source":"index.js","name":"remove","original":{"line":26,"column":31},"generated":{"line":1,"column":906}},{"source":"index.js","original":{"line":26,"column":38},"generated":{"line":1,"column":913}},{"source":"index.js","name":"alert","original":{"line":28,"column":16},"generated":{"line":1,"column":930}},{"source":"index.js","original":{"line":28,"column":22},"generated":{"line":1,"column":936}},{"source":"index.js","name":"form","original":{"line":29,"column":16},"generated":{"line":1,"column":946}},{"source":"index.js","name":"classList","original":{"line":29,"column":21},"generated":{"line":1,"column":948}},{"source":"index.js","name":"remove","original":{"line":29,"column":31},"generated":{"line":1,"column":958}},{"source":"index.js","original":{"line":29,"column":38},"generated":{"line":1,"column":965}},{"source":"index.js","name":"alert","original":{"line":32,"column":12},"generated":{"line":1,"column":982}},{"source":"index.js","original":{"line":32,"column":18},"generated":{"line":1,"column":988}},{"source":"index.js","name":"formImage","original":{"line":76,"column":10},"generated":{"line":1,"column":1021}},{"source":"index.js","name":"formImage","original":{"line":76,"column":10},"generated":{"line":1,"column":1027}},{"source":"index.js","name":"document","original":{"line":76,"column":22},"generated":{"line":1,"column":1029}},{"source":"index.js","name":"getElementById","original":{"line":76,"column":31},"generated":{"line":1,"column":1038}},{"source":"index.js","original":{"line":76,"column":46},"generated":{"line":1,"column":1053}},{"source":"index.js","name":"formPreview","original":{"line":77,"column":10},"generated":{"line":1,"column":1066}},{"source":"index.js","name":"document","original":{"line":77,"column":24},"generated":{"line":1,"column":1068}},{"source":"index.js","name":"getElementById","original":{"line":77,"column":33},"generated":{"line":1,"column":1077}},{"source":"index.js","original":{"line":77,"column":48},"generated":{"line":1,"column":1092}},{"source":"index.js","name":"formImage","original":{"line":79,"column":4},"generated":{"line":1,"column":1107}},{"source":"index.js","name":"addEventListener","original":{"line":79,"column":14},"generated":{"line":1,"column":1109}},{"source":"index.js","original":{"line":79,"column":31},"generated":{"line":1,"column":1126}},{"source":"index.js","original":{"line":79,"column":40},"generated":{"line":1,"column":1135}},{"source":"index.js","name":"uploadFile","original":{"line":83,"column":13},"generated":{"line":1,"column":1141}},{"source":"index.js","name":"file","original":{"line":83,"column":24},"generated":{"line":1,"column":1150}},{"source":"index.js","original":{"line":84,"column":11},"generated":{"line":1,"column":1153}},{"source":"index.js","original":{"line":84,"column":12},"generated":{"line":1,"column":1157}},{"source":"index.js","original":{"line":84,"column":13},"generated":{"line":1,"column":1158}},{"source":"index.js","original":{"line":84,"column":26},"generated":{"line":1,"column":1171}},{"source":"index.js","original":{"line":84,"column":38},"generated":{"line":1,"column":1183}},{"source":"index.js","name":"includes","original":{"line":84,"column":51},"generated":{"line":1,"column":1196}},{"source":"index.js","name":"file","original":{"line":84,"column":60},"generated":{"line":1,"column":1205}},{"source":"index.js","name":"type","original":{"line":84,"column":65},"generated":{"line":1,"column":1207}},{"source":"index.js","original":{"line":87,"column":12},"generated":{"line":1,"column":1213}},{"source":"index.js","name":"alert","original":{"line":85,"column":12},"generated":{"line":1,"column":1220}},{"source":"index.js","original":{"line":85,"column":18},"generated":{"line":1,"column":1226}},{"source":"index.js","name":"formImage","original":{"line":86,"column":12},"generated":{"line":1,"column":1263}},{"source":"index.js","name":"value","original":{"line":86,"column":22},"generated":{"line":1,"column":1265}},{"source":"index.js","original":{"line":86,"column":30},"generated":{"line":1,"column":1271}},{"source":"index.js","name":"file","original":{"line":90,"column":11},"generated":{"line":1,"column":1275}},{"source":"index.js","name":"file","original":{"line":90,"column":11},"generated":{"line":1,"column":1278}},{"source":"index.js","name":"size","original":{"line":90,"column":16},"generated":{"line":1,"column":1280}},{"source":"index.js","original":{"line":90,"column":22},"generated":{"line":1,"column":1285}},{"source":"index.js","original":{"line":92,"column":12},"generated":{"line":1,"column":1293}},{"source":"index.js","name":"alert","original":{"line":91,"column":12},"generated":{"line":1,"column":1305}},{"source":"index.js","original":{"line":91,"column":18},"generated":{"line":1,"column":1311}},{"source":"index.js","name":"reader","original":{"line":95,"column":12},"generated":{"line":1,"column":1343}},{"source":"index.js","name":"reader","original":{"line":95,"column":12},"generated":{"line":1,"column":1347}},{"source":"index.js","original":{"line":95,"column":21},"generated":{"line":1,"column":1349}},{"source":"index.js","name":"FileReader","original":{"line":95,"column":25},"generated":{"line":1,"column":1353}},{"source":"index.js","name":"reader","original":{"line":96,"column":8},"generated":{"line":1,"column":1364}},{"source":"index.js","name":"onload","original":{"line":96,"column":15},"generated":{"line":1,"column":1366}},{"source":"index.js","original":{"line":96,"column":24},"generated":{"line":1,"column":1373}},{"source":"index.js","name":"e","original":{"line":96,"column":34},"generated":{"line":1,"column":1382}},{"source":"index.js","name":"formPreview","original":{"line":97,"column":12},"generated":{"line":1,"column":1385}},{"source":"index.js","name":"innerHTML","original":{"line":97,"column":24},"generated":{"line":1,"column":1387}},{"source":"index.js","name":"e","original":{"line":97,"column":49},"generated":{"line":1,"column":1410}},{"source":"index.js","name":"target","original":{"line":97,"column":51},"generated":{"line":1,"column":1412}},{"source":"index.js","name":"result","original":{"line":97,"column":58},"generated":{"line":1,"column":1419}},{"source":"index.js","name":"reader","original":{"line":99,"column":8},"generated":{"line":1,"column":1442}},{"source":"index.js","name":"onerror","original":{"line":99,"column":15},"generated":{"line":1,"column":1444}},{"source":"index.js","original":{"line":99,"column":25},"generated":{"line":1,"column":1452}},{"source":"index.js","name":"e","original":{"line":99,"column":34},"generated":{"line":1,"column":1461}},{"source":"index.js","name":"alert","original":{"line":100,"column":12},"generated":{"line":1,"column":1464}},{"source":"index.js","original":{"line":100,"column":18},"generated":{"line":1,"column":1470}},{"source":"index.js","name":"reader","original":{"line":102,"column":8},"generated":{"line":1,"column":1481}},{"source":"index.js","name":"readAsDataURL","original":{"line":102,"column":15},"generated":{"line":1,"column":1483}},{"source":"index.js","name":"file","original":{"line":102,"column":29},"generated":{"line":1,"column":1497}},{"source":"index.js","name":"uploadFile","original":{"line":80,"column":8},"generated":{"line":1,"column":1500}},{"source":"index.js","name":"formImage","original":{"line":80,"column":19},"generated":{"line":1,"column":1501}},{"source":"index.js","name":"files","original":{"line":80,"column":29},"generated":{"line":1,"column":1503}},{"source":"index.js","original":{"line":80,"column":35},"generated":{"line":1,"column":1509}}],"sources":{"index.js":"\"use strict\"\n\ndocument.addEventListener('DOMContentLoaded',function(){\n    const form = document.getElementById('form')\n    form.addEventListener('submit',formsend);\n\n    async function formsend(e){\n        e.preventDefault()\n\n        let error = formValidate(form)\n\n        let formData = new FormData(form)\n        formData.append('image', formImage.files[0])\n\n        if(error === 0){\n            form.classList.add('_sending')\n            let response = await fetch('sendmail.php',{\n                method:'POST',\n                body:formData\n            })\n            if(response.ok){\n                let result = await response.json()\n                alert(result.message)\n                formPreview.innerHTML = ''\n                form.reset()\n                form.classList.remove('_sending')\n            }else{\n                alert('Ошибка')\n                form.classList.remove('_sending')\n            }\n        }else{\n            alert('Заполните обязательные поля')\n        }\n    }\n\n    function formValidate(form){\n        let error = 0\n        let formReq = document.querySelectorAll('._req')\n\n        for (let index =0; index < formReq.length; index ++){\n            const input = formReq[index];\n            formRemoveError(input)\n\n            if(input.classList.contains('_email')){\n                if(emailTest(input)){\n                    formAddError(input)\n                    error++;\n                }\n            }else if(input.getAttribute(\"type\")=== \"checkbox\" && input.checked === false){\n                formAddError(input)\n                error++\n            }else{\n                if (input.value === ''){\n                    formAddError(input)\n                    error++\n                }\n            }\n        }\n        return error\n    }\n\n    function formAddError(input){\n        input.parentElement.classList.add('_error')\n        input.classList.add('_error')\n    }\n\n    function formRemoveError(input){\n        input.parentElement.classList.remove('_error')\n        input.classList.remove('_error')\n    }\n\n    function emailTest(input){\n        return !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value)\n    }\n\n    const formImage = document.getElementById('formImage');\n    const formPreview = document.getElementById('formPreview')\n\n    formImage.addEventListener('change',()=>{\n        uploadFile(formImage.files[0])\n    })\n\n    function uploadFile(file){\n        if(!['image/jpeg','image/png','image/gif'].includes(file.type)){\n            alert('Разрешены только изображения')\n            formImage.value = ''\n            return\n        }\n\n        if(file.size >2 * 1024 *1024){\n            alert('Файл должен быть меньше 2 мб')\n            return;\n        }\n\n        var reader = new FileReader()\n        reader.onload = function (e){\n            formPreview.innerHTML = `<img src=\"${e.target.result}\" alt=\"Foto\">`\n        }\n        reader.onerror = function(e){\n            alert('Ошибка')\n        }\n        reader.readAsDataURL(file)\n\n    }\n})"},"lineCount":null}},"error":null,"hash":"a4d74f2743492b4498b09a1e238ad0bb","cacheData":{"env":{}}}